!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c),c}:a(jQuery)}(function(a){"use strict";var b=a(document),c=a(window),d="selectric",e="Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Scroll Group GroupLabel",f=".sl",g=["a","e","i","o","u","n","c","y"],h=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g],i=function(b,c){var d=this;d.element=b,d.$element=a(b),d.state={multiple:!!d.$element.attr("multiple"),enabled:!1,opened:!1,currValue:-1,selectedIdx:-1,highlightedIdx:-1},d.eventTriggers={open:d.open,close:d.close,destroy:d.destroy,refresh:d.refresh,init:d.init},d.init(c)};i.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(a){for(var b=h.length;b--;)a=a.toLowerCase().replace(h[b],g[b]);return a},format:function(a){var b=arguments;return(""+a).replace(/\{(?:(\d+)|(\w+))\}/g,function(a,c,d){return d&&b[1]?b[1][d]:b[c]})},nextEnabledItem:function(a,b){for(;a[b=(b+1)%a.length].disabled;);return b},previousEnabledItem:function(a,b){for(;a[b=(b>0?b:a.length)-1].disabled;);return b},toDash:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(b,c){var e=c.element,f=c.options["on"+b],g=[e].concat([].slice.call(arguments).slice(1));a.isFunction(f)&&f.apply(e,g),a(e).trigger(d+"-"+this.toDash(b),g)},arrayToClassname:function(b){var c=a.grep(b,function(a){return!!a});return a.trim(c.join(" "))}},init:function(b){var c=this;if(c.options=a.extend(!0,{},a.fn[d].defaults,c.options,b),c.utils.triggerCallback("BeforeInit",c),c.destroy(!0),c.options.disableOnMobile&&c.utils.isMobile())return void(c.disableOnMobile=!0);c.classes=c.getClassNames();var e=a("<input/>",{class:c.classes.input,readonly:c.utils.isMobile()}),f=a("<div/>",{class:c.classes.items,tabindex:-1}),g=a("<div/>",{class:c.classes.scroll}),h=a("<div/>",{class:c.classes.prefix,html:c.options.arrowButtonMarkup}),i=a("<span/>",{class:"label"}),j=c.$element.wrap("<div/>").parent().append(h.prepend(i),f,e),k=a("<div/>",{class:c.classes.hideselect});c.elements={input:e,items:f,itemsScroll:g,wrapper:h,label:i,outerWrapper:j},c.options.nativeOnMobile&&c.utils.isMobile()&&(c.elements.input=void 0,k.addClass(c.classes.prefix+"-is-native"),c.$element.on("change",function(){c.refresh()})),c.$element.on(c.eventTriggers).wrap(k),c.originalTabindex=c.$element.prop("tabindex"),c.$element.prop("tabindex",-1),c.populate(),c.activate(),c.utils.triggerCallback("Init",c)},activate:function(){var a=this,b=a.elements.items.closest(":visible").children(":hidden").addClass(a.classes.tempshow),c=a.$element.width();b.removeClass(a.classes.tempshow),a.utils.triggerCallback("BeforeActivate",a),a.elements.outerWrapper.prop("class",a.utils.arrayToClassname([a.classes.wrapper,a.$element.prop("class").replace(/\S+/g,a.classes.prefix+"-$&"),a.options.responsive?a.classes.responsive:""])),a.options.inheritOriginalWidth&&c>0&&a.elements.outerWrapper.width(c),a.unbindEvents(),a.$element.prop("disabled")?(a.elements.outerWrapper.addClass(a.classes.disabled),a.elements.input&&a.elements.input.prop("disabled",!0)):(a.state.enabled=!0,a.elements.outerWrapper.removeClass(a.classes.disabled),a.$li=a.elements.items.removeAttr("style").find("li"),a.bindEvents()),a.utils.triggerCallback("Activate",a)},getClassNames:function(){var b=this,c=b.options.customClass,d={};return a.each(e.split(" "),function(a,e){var f=c.prefix+e;d[e.toLowerCase()]=c.camelCase?f:b.utils.toDash(f)}),d.prefix=c.prefix,d},setLabel:function(){var b=this,c=b.options.labelBuilder;if(b.state.multiple){var d=a.isArray(b.state.currValue)?b.state.currValue:[b.state.currValue];d=0===d.length?[0]:d;var e=a.map(d,function(c){return a.grep(b.lookupItems,function(a){return a.index===c})[0]});e=a.grep(e,function(b){return e.length>1||0===e.length?""!==a.trim(b.value):b}),e=a.map(e,function(d){return a.isFunction(c)?c(d):b.utils.format(c,d)}),b.options.multiple.maxLabelEntries&&(e.length>=b.options.multiple.maxLabelEntries+1?(e=e.slice(0,b.options.multiple.maxLabelEntries),e.push(a.isFunction(c)?c({text:"..."}):b.utils.format(c,{text:"..."}))):e.slice(e.length-1)),b.elements.label.html(e.join(b.options.multiple.separator))}else{var f=b.lookupItems[b.state.currValue];b.elements.label.html(a.isFunction(c)?c(f):b.utils.format(c,f))}},populate:function(){var b=this,c=b.$element.children(),d=b.$element.find("option"),e=d.filter(":selected"),f=d.index(e),g=0,h=b.state.multiple?[]:0;e.length>1&&b.state.multiple&&(f=[],e.each(function(){f.push(a(this).index())})),b.state.currValue=~f?f:h,b.state.selectedIdx=b.state.currValue,b.state.highlightedIdx=b.state.currValue,b.items=[],b.lookupItems=[],c.length&&(c.each(function(c){var d=a(this);if(d.is("optgroup")){var e={element:d,label:d.prop("label"),groupDisabled:d.prop("disabled"),items:[]};d.children().each(function(c){var d=a(this);e.items[c]=b.getItemData(g,d,e.groupDisabled||d.prop("disabled")),b.lookupItems[g]=e.items[c],g++}),b.items[c]=e}else b.items[c]=b.getItemData(g,d,d.prop("disabled")),b.lookupItems[g]=b.items[c],g++}),b.setLabel(),b.elements.items.append(b.elements.itemsScroll.html(b.getItemsMarkup(b.items))))},getItemData:function(b,c,d){var e=this;return{index:b,element:c,value:c.val(),className:c.prop("class"),text:c.html(),slug:a.trim(e.utils.replaceDiacritics(c.html())),selected:c.prop("selected"),disabled:d}},getItemsMarkup:function(b){var c=this,d="<ul>";return a.isFunction(c.options.listBuilder)&&c.options.listBuilder&&(b=c.options.listBuilder(b)),a.each(b,function(b,e){void 0!==e.label?(d+=c.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',c.utils.arrayToClassname([c.classes.group,e.groupDisabled?"disabled":"",e.element.prop("class")]),c.classes.grouplabel,e.element.prop("label")),a.each(e.items,function(a,b){d+=c.getItemMarkup(b.index,b)}),d+="</ul>"):d+=c.getItemMarkup(e.index,e)}),d+"</ul>"},getItemMarkup:function(b,c){var d=this,e=d.options.optionsItemBuilder,f={value:c.value,text:c.text,slug:c.slug,index:c.index};return d.utils.format('<li data-index="{1}" class="{2}">{3}</li>',b,d.utils.arrayToClassname([c.className,b===d.items.length-1?"last":"",c.disabled?"disabled":"",c.selected?"selected":""]),a.isFunction(e)?d.utils.format(e(c),c):d.utils.format(e,f))},unbindEvents:function(){var a=this;a.elements.wrapper.add(a.$element).add(a.elements.outerWrapper).add(a.elements.input).off(f)},bindEvents:function(){var b=this;b.elements.outerWrapper.on("mouseenter"+f+" mouseleave"+f,function(c){a(this).toggleClass(b.classes.hover,"mouseenter"===c.type),b.options.openOnHover&&(clearTimeout(b.closeTimer),"mouseleave"===c.type?b.closeTimer=setTimeout(a.proxy(b.close,b),b.options.hoverIntentTimeout):b.open())}),b.elements.wrapper.on("click"+f,function(a){b.state.opened?b.close():b.open(a)}),b.options.nativeOnMobile&&b.utils.isMobile()||(b.$element.on("focus"+f,function(){b.elements.input.focus()}),b.elements.input.prop({tabindex:b.originalTabindex,disabled:!1}).on("keydown"+f,a.proxy(b.handleKeys,b)).on("focusin"+f,function(a){b.elements.outerWrapper.addClass(b.classes.focus),b.elements.input.one("blur",function(){b.elements.input.blur()}),b.options.openOnFocus&&!b.state.opened&&b.open(a)}).on("focusout"+f,function(){b.elements.outerWrapper.removeClass(b.classes.focus)}).on("input propertychange",function(){var c=b.elements.input.val(),d=new RegExp("^"+b.utils.escapeRegExp(c),"i");clearTimeout(b.resetStr),b.resetStr=setTimeout(function(){b.elements.input.val("")},b.options.keySearchTimeout),c.length&&a.each(b.items,function(a,c){if(!c.disabled&&d.test(c.text)||d.test(c.slug))return void b.highlight(a)})})),b.$li.on({mousedown:function(a){a.preventDefault(),a.stopPropagation()},click:function(){return b.select(a(this).data("index")),!1}})},handleKeys:function(b){var c=this,d=b.which,e=c.options.keys,f=a.inArray(d,e.previous)>-1,g=a.inArray(d,e.next)>-1,h=a.inArray(d,e.select)>-1,i=a.inArray(d,e.open)>-1,j=c.state.highlightedIdx,k=f&&0===j||g&&j+1===c.items.length,l=0;if(13!==d&&32!==d||b.preventDefault(),f||g){if(!c.options.allowWrap&&k)return;f&&(l=c.utils.previousEnabledItem(c.lookupItems,j)),g&&(l=c.utils.nextEnabledItem(c.lookupItems,j)),c.highlight(l)}return h&&c.state.opened?(c.select(j),void(c.state.multiple&&c.options.multiple.keepMenuOpen||c.close())):void(i&&!c.state.opened&&c.open())},refresh:function(){var a=this;a.populate(),a.activate(),a.utils.triggerCallback("Refresh",a)},setOptionsDimensions:function(){var a=this,b=a.elements.items.closest(":visible").children(":hidden").addClass(a.classes.tempshow),c=a.options.maxHeight,d=a.elements.items.outerWidth(),e=a.elements.wrapper.outerWidth()-(d-a.elements.items.width());!a.options.expandToItemText||e>d?a.finalWidth=e:(a.elements.items.css("overflow","scroll"),a.elements.outerWrapper.width(9e4),a.finalWidth=a.elements.items.width(),a.elements.items.css("overflow",""),a.elements.outerWrapper.width("")),a.elements.items.width(a.finalWidth).height()>c&&a.elements.items.height(c),b.removeClass(a.classes.tempshow)},isInViewport:function(){var a=this,b=c.scrollTop(),d=c.height(),e=a.elements.outerWrapper.offset().top,f=a.elements.outerWrapper.outerHeight(),g=e+f+a.itemsHeight<=b+d,h=e-a.itemsHeight>b,i=!g&&h;a.elements.outerWrapper.toggleClass(a.classes.above,i)},detectItemVisibility:function(b){var c=this,d=c.$li.filter("[data-index]");c.state.multiple&&(b=a.isArray(b)&&0===b.length?0:b,b=a.isArray(b)?Math.min.apply(Math,b):b);var e=d.eq(b).outerHeight(),f=d[b].offsetTop,g=c.elements.itemsScroll.scrollTop(),h=f+2*e;c.elements.itemsScroll.scrollTop(h>g+c.itemsHeight?h-c.itemsHeight:f-e<g?f-e:g)},open:function(c){var e=this;return(!e.options.nativeOnMobile||!e.utils.isMobile())&&(e.utils.triggerCallback("BeforeOpen",e),c&&(c.preventDefault(),e.options.stopPropagation&&c.stopPropagation()),void(e.state.enabled&&(e.setOptionsDimensions(),a("."+e.classes.hideselect,"."+e.classes.open).children()[d]("close"),e.state.opened=!0,e.itemsHeight=e.elements.items.outerHeight(),e.itemsInnerHeight=e.elements.items.height(),e.elements.outerWrapper.addClass(e.classes.open),e.elements.input.val(""),c&&"focusin"!==c.type&&e.elements.input.focus(),setTimeout(function(){b.on("click"+f,a.proxy(e.close,e)).on("scroll"+f,a.proxy(e.isInViewport,e))},1),e.isInViewport(),e.options.preventWindowScroll&&b.on("mousewheel"+f+" DOMMouseScroll"+f,"."+e.classes.scroll,function(b){var c=b.originalEvent,d=a(this).scrollTop(),f=0;"detail"in c&&(f=c.detail*-1),"wheelDelta"in c&&(f=c.wheelDelta),"wheelDeltaY"in c&&(f=c.wheelDeltaY),"deltaY"in c&&(f=c.deltaY*-1),(d===this.scrollHeight-e.itemsInnerHeight&&f<0||0===d&&f>0)&&b.preventDefault()}),e.detectItemVisibility(e.state.selectedIdx),e.highlight(e.state.multiple?-1:e.state.selectedIdx),e.utils.triggerCallback("Open",e))))},close:function(){var a=this;a.utils.triggerCallback("BeforeClose",a),b.off(f),a.elements.outerWrapper.removeClass(a.classes.open),a.state.opened=!1,a.utils.triggerCallback("Close",a)},change:function(){var b=this;b.utils.triggerCallback("BeforeChange",b),b.state.multiple?(a.each(b.lookupItems,function(a){b.lookupItems[a].selected=!1,b.$element.find("option").prop("selected",!1)}),a.each(b.state.selectedIdx,function(a,c){b.lookupItems[c].selected=!0,b.$element.find("option").eq(c).prop("selected",!0)}),b.state.currValue=b.state.selectedIdx,b.setLabel(),b.utils.triggerCallback("Change",b)):b.state.currValue!==b.state.selectedIdx&&(b.$element.prop("selectedIndex",b.state.currValue=b.state.selectedIdx).data("value",b.lookupItems[b.state.selectedIdx].text),b.setLabel(),b.utils.triggerCallback("Change",b))},highlight:function(a){var b=this,c=b.$li.filter("[data-index]").removeClass("highlighted");b.utils.triggerCallback("BeforeHighlight",b),void 0===a||a===-1||b.lookupItems[a].disabled||(c.eq(b.state.highlightedIdx=a).addClass("highlighted"),b.detectItemVisibility(a),b.utils.triggerCallback("Highlight",b))},select:function(b){var c=this,d=c.$li.filter("[data-index]");if(c.utils.triggerCallback("BeforeSelect",c,b),void 0!==b&&b!==-1&&!c.lookupItems[b].disabled){if(c.state.multiple){c.state.selectedIdx=a.isArray(c.state.selectedIdx)?c.state.selectedIdx:[c.state.selectedIdx];var e=a.inArray(b,c.state.selectedIdx);e!==-1?c.state.selectedIdx.splice(e,1):c.state.selectedIdx.push(b),d.removeClass("selected").filter(function(b){return a.inArray(b,c.state.selectedIdx)!==-1}).addClass("selected")}else d.removeClass("selected").eq(c.state.selectedIdx=b).addClass("selected");c.state.multiple&&c.options.multiple.keepMenuOpen||c.close(),c.change(),c.utils.triggerCallback("Select",c,b)}},destroy:function(a){var b=this;b.state&&b.state.enabled&&(b.elements.items.add(b.elements.wrapper).add(b.elements.input).remove(),a||b.$element.removeData(d).removeData("value"),b.$element.prop("tabindex",b.originalTabindex).off(f).off(b.eventTriggers).unwrap().unwrap(),b.state.enabled=!1)}},a.fn[d]=function(b){return this.each(function(){var c=a.data(this,d);c&&!c.disableOnMobile?"string"==typeof b&&c[b]?c[b]():c.init(b):a.data(this,d,new i(this,b))})},a.fn[d].defaults={onChange:function(b){a(b).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!1,nativeOnMobile:!0,openOnFocus:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,stopPropagation:!0,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:!1,keys:{previous:[37,38],next:[39,40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:d,camelCase:!1},multiple:{separator:", ",keepMenuOpen:!0,maxLabelEntries:!1}}});